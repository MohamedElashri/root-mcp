# ROOT-MCP Server Configuration

# Server settings
server:
  name: "root-mcp"

# Resource limits (safety bounds)
limits:
  max_rows_per_call: 1_000_000

# Caching configuration
cache:
  enabled: true
  file_cache_size: 50  # Number of open file handles to cache

# Data sources (MCP resources)
resources:
  - name: "local_data"
    uri: "file:///data/root_files"
    description: "Local ROOT files for analysis"
    allowed_patterns:
      - "*.root"
    excluded_patterns:
      - ".*"  # No hidden files
      - "tmp*"

  # Example: Remote XRootD storage
  # - name: "xrootd_data"
  #   uri: "root://eosuser.cern.ch//eos/user/data"
  #   description: "CERN EOS storage"
  #   allowed_patterns:
  #     - "*.root"
  #   requires_auth: true
  #   auth_type: "kerberos"

  # Example: HTTP open data
  # HTTP open data
  - name: "opendata"
    uri: "root://eospublic.cern.ch//eos/opendata/cms/derived-data/AOD2NanoAODOutreachTool"
    description: "CERN Open Data samples"
    allowed_patterns:
      - "*.root"

# Security settings
security:
  # Allowed directories (absolute paths) - prevents path traversal
  allowed_roots:
    - "/data/root_files"
    - "/tmp/root_mcp_output"

  # Whether to allow remote file access
  allow_remote: false

  # Protocols allowed for remote files
  allowed_protocols:
    - "file"
    - "root"
    - "http"
    - "https"

  # Maximum path depth to prevent DoS
  max_path_depth: 10

# Output settings
output:
  # Where to write exported files
  export_base_path: "/tmp/root_mcp_output"

  # Allowed export formats
  allowed_formats:
    - "json"
    - "csv"
    - "parquet"

# Analysis defaults
analysis:
  # Default chunk size for iterating large TTrees
  default_chunk_size: 10_000

  # Default limit for data reads if not specified
  default_read_limit: 1_000

  # Histogram defaults
  histogram:
    max_bins_1d: 10_000
    max_bins_2d: 1_000  # Per dimension

# Feature flags
features:
  enable_export: true
